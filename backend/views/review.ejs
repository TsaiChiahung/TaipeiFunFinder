<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>活動審核後台</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">
  <div class="container my-5">
    <h1 class="mb-4">🎭 活動審核後台</h1>

    <!-- 手動抓取活動 -->
    <form action="/admin/fetch" method="POST" class="mb-4">
      <button type="submit" class="btn btn-primary">🔄 手動抓取活動</button>
    </form>

    <!-- 待審核活動 -->
    <div class="card mb-4">
      <div class="card-header bg-warning">
        <h2 class="h5 mb-0">📝 待審核活動</h2>
      </div>
      <div class="card-body">
        <% if (pending.length === 0) { %>
          <p class="text-muted">目前沒有待審核的活動。</p>
        <% } else { %>
          <ul class="list-group">
            <% pending.forEach(event => { %>
              <li class="list-group-item">
                <h5><%= event.title %></h5>
                <p><strong>地點：</strong><%= event.location %></p>
                <p><strong>日期：</strong><%= event.startDate %> ~ <%= event.endDate %></p>
                <p><%= event.description || "無簡介" %></p>
                <form action="/api/events/<%= event._id %>/approve" method="POST" class="d-inline">
                  <button type="submit" class="btn btn-success btn-sm">✅ 核准</button>
                </form>
                <form action="/api/events/<%= event._id %>/reject" method="POST" class="d-inline">
                  <button type="submit" class="btn btn-danger btn-sm">❌ 拒絕</button>
                </form>
              </li>
            <% }); %>
          </ul>
        <% } %>
      </div>
    </div>

    <!-- 已核准活動 -->
    <div class="card">
      <div class="card-header bg-success text-white">
        <h2 class="h5 mb-0">✅ 已核准活動</h2>
      </div>
      <div class="card-body">
        <% if (approved.length === 0) { %>
          <p class="text-muted">目前沒有已核准的活動。</p>
        <% } else { %>
          <ul class="list-group">
            <% approved.forEach(event => { %>
              <li class="list-group-item">
                <h5><%= event.title %></h5>
                <p><strong>地點：</strong><%= event.location %></p>
                <p><strong>日期：</strong><%= event.startDate %> ~ <%= event.endDate %></p>
              </li>
            <% }); %>
          </ul>
        <% } %>
      </div>
    </div>

  </div>
</body>
</html>
